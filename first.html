<!doctype html>
<html lang="en">
    <head>
        <meta charset ="urf-8">
        <meta name="viewpoint" content="width=device-width, initial-scale=1">
        <!--bootstrap CSS-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <title> POs sytem </title>
    </head>
    <body>
        <div class ="bg-dark p-3">
            <div class ="row mx-0 pb-3 bg-light">
                <div class ="col-sm-8">
                    <p>Order <small, class ="text-muted">Today, 24/10/2021,16:25</small> </p>
                <div class= "card rounded-3 mb-3">
                    <div class = "card-body">
                        <ul class="nav nav-pills" id="pills-tab" role="tablist">
                            <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="pills-food-tab" data-bs-toggle="pill" data-bs-target="#pills-food" type="button" role="tab" aria-controls="pills-food" aria-selected="true">FOOD</button>
                            </li>
                            <li class="nav-item" role="presentation">
                            <button class="nav-link rounded-pill" id="pills-drink-tab" data-bs-toggle="pill" data-bs-target="#pills-drink" type="button" role="tab" aria-controls="pills-drink" aria-selected="false">DRINK</button>
                            </li>
                            <li class="nav-item" role="presentation">
                            <button class="nav-link rounded-pill" id="pills-hamburger-tab" data-bs-toggle="pill" data-bs-target="#pills-hamburger" type="button" role="tab" aria-controls="pills-hamburger" aria-selected="false">HAMBURGER</button>
                            </li>
                            <li class="nav-item d-none" role="presentation">
                              <button class="nav-link rounded-pill" id="pills-checkout-tab" data-bs-toggle="pill" data-bs-target="#pills-checkout" type="button" role="tab" aria-controls="pills-checkout" aria-selected="false">CHECK OUT</button>
                              </li>
                      </ul>
                    </div>
                </div>
                      <div class="tab-content" id="pills-tabContent">
                        <div class="tab-pane fade show active" id="pills-food" role="tabpanel" aria-labelledby="pills-food-tab">
                            <div class="row row-cols-1 row-cols-md-4 g-4">
                                <div class="col">
                                  <div class="card h-100" onclick= "order('Hamburger 1', 4.99,'./media/hamburger.jpg');" style="width:200px;height:300px;">
                                    <img src="./media/hamburger.jpg" class="card-img-top" alt="..." style="width:200px;height:200px;">
                                    <div class="card-body">
                                      <h5 class="card-title">Hamburger</h5>
                                      <p class ="card-text fw-bold">$1.99 </p>
                                    </div>
                                  </div>
                                </div>
                                <div class="col">
                                  <div class="card h-100" onclick= "order('Hamburger 2', 2.99, './media/hamburger.jpg');" style="width:200px;height:300px;">
                                    <img draggable="false" src="./media/hamburger.jpg" class="card-img-top" alt="..." style="width:200px;height:200px;">
                                    <div class="card-body">
                                      <h5 class="card-title">Card title</h5>
                                      <p class="card-text">....</p>
                                    </div>
                                  </div>
                                </div>
                                <div class="col">
                                  <div class="card h-100" onclick= "order('Hamburger 3', 6.99, './media/hamburger.jpg');" style="width:200px;height:300px;">
                                    <img draggable="false" src="./media/hamburger.jpg" class="card-img-top" alt="..." style="width:200px;height:200px;">
                                    <div class="card-body">
                                      <h5 class="card-title">Card title</h5>
                                      <p class="card-text">...</p>
                                    </div>
                                  </div>
                                </div>
                                <div class="col">
                                  <div class="card h-100" onclick= "order('Hamburger 4', 7.99, './media/hamburger.jpg');" style="width:200px;height:300px;">
                                    <img draggable="false" src="./media/hamburger.jpg" class="card-img-top" alt="..." style="width:200px;height:200px;">
                                    <div class="card-body">
                                      <h5 class="card-title">Card title</h5>
                                      <p class="card-text">....</p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                        </div>
                        <div class="tab-pane fade" id="pills-drink" role="tabpanel" aria-labelledby="pills-profile-tab">
                            <div class="row row-cols-1 row-cols-md-4 g-4">
                                <div class="col">
                                  <div class="card" style="width:200px;height:300px;">
                                    <img src="./media/hamburger.jpg" class="card-img-top" alt="..." style="width:200px;height:200px;">
                                    <div class="card-body">
                                      <h5 class="card-title">Card title</h5>
                                      <p class="card-text">...</p>
                                    </div>
                                  </div>
                                </div>
                                <div class="col">
                                  <div class="card" style="width:200px;height:300px;">
                                    <img src="./media/hamburger.jpg" class="card-img-top" alt="..." style="width:200px;height:200px;">
                                    <div class="card-body">
                                      <h5 class="card-title">Card title</h5>
                                      <p class="card-text">....</p>
                                    </div>
                                  </div>
                                </div>
                                <div class="col">
                                  <div class="card" style="width:200px;height:300px;">
                                    <img src="./media/hamburger.jpg" class="card-img-top" alt="..." style="width:200px;height:200px;">
                                    <div class="card-body">
                                      <h5 class="card-title">Card title</h5>
                                      <p class="card-text">...</p>
                                    </div>
                                  </div>
                                </div>
                                <div class="col">
                                  <div class="card" style="width:200px;height:300px;">
                                    <img src="./media/hamburger.jpg" class="card-img-top" alt="..." style="width:200px;height:200px;">
                                    <div class="card-body">
                                      <h5 class="card-title">Card title</h5>
                                      <p class="card-text">....</p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                        </div>
                        <div class="tab-pane fade" id="pills-hamburger" role="tabpanel" aria-labelledby="pills-hamburger-tab">
                            <div class="row row-cols-1 row-cols-md-4 g-4">
                                <div class="col">
                                  <div class="card" style="width:200px;height:300px;">
                                    <img src="./media/hamburger.jpg" class="card-img-top" alt="..." style="width:200px;height:200px;">
                                    <div class="card-body">
                                      <h5 class="card-title">Card title</h5>
                                      <p class="card-text">...</p>
                                    </div>
                                  </div>
                                </div>
                                <div class="col">
                                  <div class="card" style="width:200px;height:300px;">
                                    <img src="./media/hamburger.jpg" class="card-img-top" alt="..." style="width:200px;height:200px;">
                                    <div class="card-body">
                                      <h5 class="card-title">Card title</h5>
                                      <p class="card-text">....</p>
                                    </div>
                                  </div>
                                </div>
                                <div class="col">
                                  <div class="card" style="width:200px;height:300px;">
                                    <img src="./media/hamburger.jpg" class="card-img-top" alt="..." style="width:200px;height:200px;">
                                    <div class="card-body">
                                      <h5 class="card-title">Card title</h5>
                                      <p class="card-text">...</p>
                                    </div>
                                  </div>
                                </div>
                                <div class="col">
                                  <div class="card" style="width:200px;height:300px;">
                                    <img src="./media/hamburger.jpg" class="card-img-top" alt="..." style="width:200px;height:200px;">
                                    <div class="card-body">
                                      <h5 class="card-title">Card title</h5>
                                      <p class="card-text">....</p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                        </div>
                        <div class="tab-pane fade" id="pills-checkout" role="tabpanel" aria-labelledby="pills-checkout-tab">Check out
                          <!--Check out-->
                          <div class="row mb-3">
                            <label for="colFormLabelLg" class="col-sm-4  col-form-label col-form-label-lg">Customer's Name</label>
                            <div class="col-sm-8">
                              <input type="text" class="rounded-pill form-contro l form-control-lg" id="customername" placeholder="order">
                            </div>
                          </div>

                          <div class="row mb-3">
                            <label for="colFormLabelLg" class="col-sm-4  col-form-label col-form-label-lg">Telephone's number</label>
                            <div class="col-sm-8">
                              <input type="number" class="rounded-pill form-contro form-control-lg" id="telephonenumber" placeholder="phone">
                            </div>
                          </div>

                          <!--Amount of order-->
                          <div class="row  mb-3">
                            <label for="colFormLabelLg" class="col-sm-4  col-form-label col-form-label-lg">Total of amount:</label>
                            <div class="col-sm-8">
                              <input type="number" step = "0.01" class="rounded-pill form-contro l form-control-lg text-center" id="amount" placeholder="amount" disabled>
                            </div>
                          </div>

                        </div>
                        
                      </div>
                </div>
                <div class= "col-sm-4">
                    <div class = "card">
                        <div class = "card-body">
                            <h5 class ="d-flex justify-content-between align-items-center"><span> Order </span><button onclick="clearorder()" class ="btn btn-sm btn-danger rounded-pill">Clean</button></h5>
                            <hr>
                            <ul id = "orderlist" class = "list-unstyled" style = "height: 50vh; overflow-y: auto;">
                            </ul>
                            <hr>
                            <ul class = "list-unstyled mb-0">
                              <li class = "d-flex justify-content-between align-items-center">
                                <big>Total item: </big><big id="totalitem" class="card-text fw-bold" ></big> </span>
                              </li>
                              <li class = "d-flex justify-content-between align-items-center">
                                <big>Total Amount: </big><big class = "fw-bold">$ <span id="totalcost" class="card-text" >0.00</span></big>
                              </li>
                              <li>
                                <button disabled="" id="checkoutbutton" onclick= "gotocheckouttab()" class ="btn btn-primary btn-lg w-100 rounded-pill">CHECK OUT</button>
                              </li>
                            </ul>
                            </li>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            const orderidarray = [];
            const orderpricearray= [];
            const orderitemarray = [];
            const orderarray= [];
            const orderimgarray = [];
            const orderitemidarray = [];
            let id = 0;
            function order(itemname, itemprice, itemimage){
                ///add into an array
 
                orderidarray.push(id);
                orderitemarray.push(itemname);
                orderpricearray.push(itemprice);
                ///orderitemidarray.push(itemid);
                orderimgarray.push(itemimage);
                orderarray.push(itemname, itemprice, itemimage);
                ///increase id 
                id++;

                let orderlist = document.getElementById('orderlist');
                ////create the Li tag
                const orderitem = document.createElement('li');
                orderitem.className = "d-flex justify-content-between align-items-center";

                const orderitempricespan = document.createElement('span')
                ///add a text to LI 
                const orderItemname = document.createTextNode(' '+ itemname);
                const orderprice = document.createTextNode('$' + itemprice);
                ////
                orderitempricespan.className = 'text-danger';
                orderitempricespan.appendChild(orderprice);
                /////
                ////create a delete button
                const deletebutton = document.createElement('button');
                const deletebuttontext = document.createTextNode('X');

                ///append the test to delete
                deletebutton.setAttribute('onclick', 'deleteitem('+id+',this)')
                deletebutton.appendChild(deletebuttontext);
                deletebutton.className = 'btn btn-danger rounded-pill';

                ////
                const orderitemimgtag = document.createElement('img');
                ///assign the src itemimage to img
                orderitemimgtag.src = itemimage;

                ////console.log(itemimage);
                orderitemimgtag.className = 'w-25 rounded border border-dark';
                //create a span

                const orderleftside=document.createElement('span');

                /////add in a side
                orderleftside.appendChild(orderitemimgtag);
                orderleftside.appendChild(orderItemname);
                orderleftside.appendChild(orderitempricespan);
                //append child to LI
                orderitem.appendChild(orderleftside);
                orderitem.appendChild(deletebutton);
                ///check
                orderlist.appendChild(orderitem);
                ///image section
                ///add img text
                totalitems();
                costitem();
                ///console.log(orderidarray);
                enableCheckoutbutton();
            };

            function totalitems(){ 
                document.getElementById('totalitem').innerText = orderitemarray.length;
            };
            function costitem(){
                if (orderpricearray.length == 0){
                  document.getElementById('totalcost').innerText = 0;
                }else{
                  document.getElementById('totalcost').innerText = orderpricearray.reduce(sumarray).toFixed(2);
                  document.getElementById('amount').value = orderpricearray.reduce(sumarray).toFixed(2);
                  function sumarray(total,num){
                      return total + num;
                  };
              }
                //orderpricearray.reduce(itemprice);
            };
            ///<li><img src = "./media/hamburger.jpg" style ="width: 50px;" /> <span>hamburger </span> <span class ="text-danger">$ 1.99 </span></li>
            function clearorder(){
                let orderlist = document.getElementById('orderlist');
                document.getElementById('amount').value = 0;
                orderlist.innerHTML ="";
                orderitemarray.length = 0;
                orderpricearray.length = 0;
                orderarray.length = 0;
                orderidarray.length = 0;
                id = 0;
                totalitems();
                costitem();
                enableCheckoutbutton();
            }
            function deleteitem(orderid,button){
                const indexnum = orderidarray.indexOf(orderid);
                orderidarray.splice(indexnum, 1);
                orderitemarray.splice(indexnum, 1);
                orderpricearray.splice(indexnum,1);
                orderimgarray.splice(indexnum,1);
                totalitems();
                costitem();
                orderlist.removeChild(button.parentElement);

                if (orderpricearray.length === 0){
                  document.getElementById('amount').value = 0;
                  enableCheckoutbutton();
                }
            };
            ////enable check out
            function enableCheckoutbutton(){
                const checkoutbutton = document.getElementById('checkoutbutton');
                checkoutbutton.disabled = true;
                if(orderidarray.length > 0){
                    checkoutbutton.disabled = false;
                }
                if(orderidarray.length == 0){
                    const backtofoodtab = document.getElementById('pills-food-tab');
                    const foodtab = new bootstrap.Tab(backtofoodtab);

                    foodtab.show();
                }
            };
            ////open a new tab
            function gotocheckouttab(){
              const firstabel = document.getElementById('pills-checkout-tab');
              const firsttab = new bootstrap.Tab(firstabel);

              firsttab.show();
            };

        </script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    </body>


   
</html>